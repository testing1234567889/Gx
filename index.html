<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>APK Card Generator - GxMods Next Level</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Generator HTML card APK MOD by GxMods dengan UI Futuristik Next Level">
<style>
/* ========== Animated Aurora Background ========== */
body {
  margin: 0; padding: 20px;
  font-family: 'Inter', 'Segoe UI', sans-serif;
  background: linear-gradient(270deg, #0f0c29, #302b63, #24243e);
  background-size: 600% 600%;
  animation: bgShift 20s ease infinite;
  color: #e5e5e5;
}
@keyframes bgShift {
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* ========== Form Container ========== */
.form-container {
  max-width: 1100px; margin: 20px auto; padding: 32px;
  border-radius: 24px; background: rgba(20, 20, 30, 0.75);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(0, 255, 224, 0.15);
  box-shadow: 0 8px 30px rgba(0, 255, 224, 0.15);
  animation: fadeIn 0.6s ease;
}
h2 {
  text-align: center; margin-bottom: 28px;
  font-size: 1.8rem; font-weight: 700;
  background: linear-gradient(90deg, #00ffe0, #4fc3f7);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}

/* ========== Form Layout ========== */
form { display: grid; grid-template-columns: repeat(3, 1fr); gap: 18px; }
form > div { display: flex; flex-direction: column; }
label { margin-bottom: 8px; font-size: 0.9rem; color: #8be9fd; font-weight: 500; }
input, textarea, select {
  padding: 12px 14px; border-radius: 12px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05); color: #fff;
  transition: all .25s ease; font-size: 0.95rem;
}
input:focus, textarea:focus, select:focus {
  border-color: #00ffe0;
  box-shadow: 0 0 12px rgba(0, 255, 224, 0.4);
  outline: none;
}
textarea { resize: vertical; min-height: 90px; }
.full { grid-column: 1 / -1; }
@media(max-width: 980px) { form { grid-template-columns: 1fr 1fr; } }
@media(max-width: 720px) { form { grid-template-columns: 1fr; } }

/* ========== Output Area & Buttons ========== */
.form-actions { grid-column: 1/-1; display: flex; justify-content: center; gap: 14px; margin-top: 8px; }
button {
  padding: 12px 26px; border: none; border-radius: 12px;
  font-weight: 600; font-size: 0.95rem;
  cursor: pointer; transition: all .3s ease;
}
.btn-generate { background: linear-gradient(135deg, #00ffe0, #4fc3f7); color: #0d0d0d; }
.btn-copy { background: linear-gradient(135deg, #ff7eb3, #ff758c); color: #fff; }
button:hover { transform: translateY(-2px) scale(1.04); box-shadow: 0 8px 18px rgba(0,0,0,0.3); }
#outputHTML {
  width: 100%; height: 340px; margin-top: 22px; padding: 14px;
  border-radius: 14px; background: rgba(10, 10, 15, 0.8);
  border: 1px solid rgba(0,255,224,0.2);
  color: #00ffe0; font-family: 'Fira Code', monospace; font-size: 0.85rem;
}

/* ========== APK Card Preview (hanya di generator) ========== */
.apk-post-card {
  margin: 28px 0; padding: 28px;
  border-radius: 20px; background: rgba(20, 20, 30, 0.85);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(0,255,224,0.25);
  box-shadow: 0 12px 30px rgba(0,255,224,0.2);
  transition: transform .4s ease, box-shadow .4s ease;
}
.apk-post-card:hover { transform: translateY(-5px) scale(1.02); box-shadow: 0 20px 40px rgba(0,255,224,0.5); }
.apk-title { font-size: 1.5rem; font-weight: 700; color: #00ffe0; display: flex; align-items: center; gap: 8px; }
.apk-developer a { color: #4fc3f7; font-size: 0.9rem; text-decoration: none; }
.apk-developer a:hover { text-decoration: underline; }
.stat-box { display: flex; gap: 14px; margin-top: 18px; }
.stat-item { flex: 1; background: rgba(0,255,224,0.05); padding: 14px; border-radius: 14px; text-align: center; }
.stat-value { font-size: 1.2rem; font-weight: 700; color: #fff; }
.stat-label { font-size: 0.8rem; color: #aaa; }

/* ========== Info APK Table ========== */
.apk-info { width: 100%; border-collapse: collapse; margin-top: 16px; }
.apk-info th, .apk-info td { padding: 8px 10px; text-align: left; }
.apk-info th { color: #ccc; font-weight: 700; font-size: 0.9rem; }
.apk-info td { color: #f5f5f5; font-weight: 600; font-size: 0.95rem; }
.apk-info th .icon-text { display: flex; align-items: center; gap: 6px; }
.apk-info svg { flex-shrink: 0; fill: currentColor; }

/* ========== Screenshots (preview) ========== */
.apk-screenshots { display: flex; flex-wrap: wrap; gap: 14px; margin-top: 14px; }
.apk-screenshots img {
  width: 150px; border-radius: 14px; cursor: pointer;
  transition: transform .4s ease, filter .4s ease;
  filter: brightness(0.95) contrast(1.2) saturate(1.15);
}
.apk-screenshots img:hover {
  transform: scale(1.05);
  filter: brightness(1.1) contrast(1.35) saturate(1.25) drop-shadow(0 0 6px rgba(0,0,0,0.6));
}

/* ========== Spinner (preview) ========== */
.spinner-area { display: none; align-items: center; gap: 10px; margin-top: 12px; }
.spinner { width: 20px; height: 20px; border: 3px solid rgba(0,255,224,0.3); border-top: 3px solid #00ffe0; border-radius: 50%; animation: spin 1s linear infinite; }
.downloading-text { font-size: 0.9rem; color: #00ffe0; }
@keyframes spin { 100% { transform: rotate(360deg); } }
.verified-icon { animation: blinkBadge 2s infinite alternate; }
@keyframes blinkBadge { from { filter: drop-shadow(0 0 2px #00ffe0); opacity: 0.6; } to { filter: drop-shadow(0 0 6px #00ffe0); opacity: 1; } }
</style>
</head>
<body>
<div class="form-container">
  <h2>üõ†Ô∏è APK Card Generator - GxMods</h2>

  <form id="apkCardForm">
    <!-- Kolom 1-3: Data APK -->
    <div><label for="appName">Nama Aplikasi</label><input id="appName" placeholder="Viu Drama Korea"></div>
    <div><label for="appDev">Developer</label><input id="appDev" placeholder="Vuclip Mobile Video"></div>
    <div><label for="devLink">Link Developer</label><input id="devLink" placeholder="https://play.google.com/..."></div>

    <div><label for="iconUrl">Icon URL</label><input id="iconUrl" placeholder="https://.../icon.png"></div>
    <div><label for="appRating">Rating</label><input id="appRating" placeholder="4.6"></div>
    <div><label for="appReviews">Ulasan</label><input id="appReviews" placeholder="123 rb"></div>

    <div><label for="appDownloads">Unduhan</label><input id="appDownloads" placeholder="10 jt+"></div>
    <div class="full"><label for="appDesc">Deskripsi Singkat</label><textarea id="appDesc" placeholder="Viu adalah aplikasi nonton drama Korea..."></textarea></div>

    <div><label for="appVersion">Versi</label><input id="appVersion" placeholder="v1.2.3"></div>
    <div><label for="appDate">Update</label><input id="appDate" placeholder="3 Okt 2025"></div>
    <div><label for="appAndroid">Android Required</label><input id="appAndroid" placeholder="Android 7+"></div>

    <div><label for="appCategory">Kategori</label><input id="appCategory" placeholder="Hiburan"></div>
    <div><label for="cpuArch">CPU Architecture</label><input id="cpuArch" placeholder="arm64-v8a, armeabi-v7a"></div>
    <div><label for="modFeatures">Fitur MOD (pisahkan dengan koma)</label><input id="modFeatures" placeholder="Premium Unlocked, No Ads"></div>

    <div><label for="downloadLink">Link Download</label><input id="downloadLink" placeholder="https://.../download.apk"></div>
    <div><label for="apkSize">Ukuran APK (MB)</label><input id="apkSize" placeholder="41.3"></div>
    <div class="full"><label for="screenshots">Screenshot URLs (pisahkan dengan koma)</label><textarea id="screenshots" placeholder="https://.../s1.jpg, https://.../s2.jpg"></textarea></div>

    <!-- ================== Pengaturan Dialog ================== -->
    <div class="full" style="margin-top:6px;"><hr style="border:0;height:1px;background:linear-gradient(90deg,transparent,#00ffe080,transparent)"></div>

    <div><label for="dlgType">Jenis Dialog</label>
      <select id="dlgType">
        <option value="none">‚Äî Tanpa Dialog ‚Äî</option>
        <option value="welcome" selected>Welcome</option>
        <option value="thanks">Terima Kasih</option>
      </select>
    </div>
    <div><label for="dlgMode">Mode Muncul</label>
      <select id="dlgMode">
        <option value="always" selected>Selalu</option>
        <option value="once">Sekali saja (per posting)</option>
      </select>
    </div>
    <div><label for="dlgVersion">Dialog Version (reset)</label><input id="dlgVersion" placeholder="v1" value="v1"></div>

    <div><label for="dlgTitle">Judul Dialog</label><input id="dlgTitle" placeholder="Selamat datang di GxMods ÊöÅ"></div>
    <div><label for="dlgSub">Subteks</label><input id="dlgSub" placeholder="Update APK & fitur premium di sini."></div>
    <div><label for="dlgPrimary">Teks Tombol Utama</label><input id="dlgPrimary" placeholder="Lanjut ke Postingan" value="Lanjut ke Postingan"></div>

    <div><label for="dlgSecondary">Teks Tombol Kedua</label><input id="dlgSecondary" placeholder="Gabung Channel" value="Gabung Channel"></div>
    <div><label for="dlgSecondaryHref">Link Tombol Kedua</label><input id="dlgSecondaryHref" placeholder="https://t.me/key_generatebot" value="https://t.me/key_generatebot"></div>
    <div><label for="dlgCloseSecondary">Klik tombol kedua ikut menutup?</label>
      <select id="dlgCloseSecondary">
        <option value="false" selected>Tidak</option>
        <option value="true">Ya</option>
      </select>
    </div>

    <div><label for="dlgAccent">Warna Aksen</label><input id="dlgAccent" placeholder="#2563eb"></div>
    <div><label for="dlgBg">Background (CSS)</label><input id="dlgBg" placeholder="linear-gradient(135deg,#0b1020,#111827)"></div>
    <div class="full" style="align-items:flex-start">
      <small style="opacity:.8">Tips: pilih ‚ÄúWelcome‚Äù/‚ÄúTerima Kasih‚Äù, biarkan judul/sub kosong untuk auto-preset. Ganti <b>Version</b> (v1 ‚Üí v2) bila mode = ‚ÄúSekali saja‚Äù dan ingin reset.</small>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-generate" id="btnGen">üîß Generate</button>
      <button type="button" class="btn-copy" onclick="copyToClipboard()">üìã Salin</button>
    </div>
  </form>

  <h3 style="margin-top:20px;color:#4fc3f7;">üìÑ Hasil Kode HTML:</h3>
  <textarea id="outputHTML" spellcheck="false"></textarea>
</div>

<!-- (Preview) Lightbox hanya untuk halaman generator -->
<div id="lightbox" onclick="closeLightbox()" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;">
  <img id="lightbox-img" src="" style="max-width:92%;max-height:92%;border-radius:20px;box-shadow:0 0 28px rgba(0,255,224,.7);">
</div>

<script>
(function(){
  // ===== Preset dialog untuk auto-isi ketika pilih tipe =====
  const presets = {
    welcome: {
      title: "Selamat datang di GxMods ÊöÅ",
      sub:   "Update APK, fitur premium, dan mod rapi. Santai, kamu pegang kendali üòâ",
      primary: "Lanjut ke Postingan",
      secondary: "Gabung Channel",
      href:  "https://t.me/key_generatebot",
      accent:"#3b82f6",
      bg:    "linear-gradient(135deg,#0b1020,#111827)"
    },
    thanks: {
      title: "Terima kasih sudah mampir!",
      sub:   "Link & changelog ada di bawah. Semoga bermanfaat üôå",
      primary: "Oke, lanjut",
      secondary: "Butuh Bantuan?",
      href:  "https://t.me/key_generatebot",
      accent:"#22c55e",
      bg:    "linear-gradient(135deg,#0d1f1a,#0f2e24)"
    }
  };

  function applyPresetIfEmpty(type){
    const p = presets[type]; if (!p) return;
    const f = id => document.getElementById(id);
    if (!f('dlgTitle').value)        f('dlgTitle').value = p.title;
    if (!f('dlgSub').value)          f('dlgSub').value = p.sub;
    if (!f('dlgPrimary').value)      f('dlgPrimary').value = p.primary;
    if (!f('dlgSecondary').value)    f('dlgSecondary').value = p.secondary;
    if (!f('dlgSecondaryHref').value)f('dlgSecondaryHref').value = p.href;
    if (!f('dlgAccent').value)       f('dlgAccent').value = p.accent;
    if (!f('dlgBg').value)           f('dlgBg').value = p.bg;
  }

  document.getElementById('dlgType').addEventListener('change', (e)=>{
    const val = e.target.value;
    if (val === 'none') return;
    applyPresetIfEmpty(val);
  });

  document.getElementById('btnGen').addEventListener('click', generateAPKCard);

  function sanitize(str){ return (str||'').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

  // ======= GENERATOR =======
  window.generateAPKCard = function(){
    const v = id => document.getElementById(id).value;
    const appName=v("appName"), appDev=v("appDev"), devLink=v("devLink"),
          iconUrl=v("iconUrl"), appRating=v("appRating"), appReviews=v("appReviews"),
          appDownloads=v("appDownloads"), appDesc=v("appDesc"),
          appVersion=v("appVersion"), appDate=v("appDate"), appAndroid=v("appAndroid"),
          appCategory=v("appCategory"), cpuArch=v("cpuArch"),
          downloadLink=v("downloadLink"), apkSize=v("apkSize");

    const modFeatures=v("modFeatures").split(",").map(s=>s.trim()).filter(Boolean);
    const screenshots=v("screenshots").split(",").map(s=>s.trim()).filter(Boolean);

    // Dialog inputs
    const dlgType=v("dlgType"); // none | welcome | thanks
    const dlgMode=v("dlgMode"); // always | once
    const dlgVersion=v("dlgVersion") || "v1";
    const dlgTitle=v("dlgTitle");
    const dlgSub=v("dlgSub");
    const dlgPrimary=v("dlgPrimary") || "Lanjut";
    const dlgSecondary=v("dlgSecondary") || "Gabung Channel";
    const dlgSecondaryHref=v("dlgSecondaryHref") || "https://t.me/key_generatebot";
    const dlgCloseSecondary=(document.getElementById("dlgCloseSecondary").value==="true");
    const dlgAccent=v("dlgAccent") || (dlgType!=="none" ? (presets[dlgType]?.accent || "#2563eb") : "");
    const dlgBg=v("dlgBg") || (dlgType!=="none" ? (presets[dlgType]?.bg || "linear-gradient(135deg,#111826,#0f172a)") : "");

    // Unique suffix biar fungsi/elemen nggak tabrakan kalau ada banyak di 1 halaman
    const uid = ('gx' + Date.now().toString(36) + Math.random().toString(36).slice(2,6));

    // ====== BUILD HTML BAGIAN SCREENSHOT & MOD ======
    const screenshotHTML = screenshots.map((src,i)=>(
      `<img src="${src}" alt="Screenshot ${i+1}" onclick="openLightbox_${uid}(${i})">`
    )).join('');

    const modHTML = `<ul style="list-style:none;padding:0;margin:1em 0;">${
      modFeatures.map(f => `
        <li style="display:flex;align-items:center;gap:6px;font-size:0.95rem;font-weight:600;color:#f5f5f5;">
          <svg width="16" height="16" viewBox="0 0 24 24"><path d="M20.285 6.709l-11.285 11.292-5.285-5.292 1.414-1.414 3.871 3.878 9.871-9.878z"/></svg>
          ${sanitize(f)}
        </li>
      `).join('')
    }</ul>`;

    // ====== DIALOG (opsional) ======
    let dialogBlock = '';
    if (dlgType !== 'none') {
      // CSS dialog kecil (Blogger-safe: tanpa boolean hidden)
      const dialogCSS = `
<style>
.gxdlg-overlay{position:fixed;left:0;top:0;right:0;bottom:0;z-index:9999;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease}
.gxdlg-overlay.gxdlg-open{opacity:1}
.gxdlg-modal{width:92vw;max-width:540px;border-radius:16px;padding:22px 18px;background:var(--gxdlg-bg,linear-gradient(135deg,#111826,#0f172a));color:#f8fafc;box-shadow:0 10px 30px rgba(0,0,0,.35);border:1px solid rgba(255,255,255,.08);transform:translateY(10px);opacity:.98;transition:transform .2s ease}
.gxdlg-open .gxdlg-modal{transform:translateY(0)}
.gxdlg-head{display:flex;gap:12px;align-items:center;margin-bottom:6px}
.gxdlg-badge{width:42px;height:42px;border-radius:12px;display:grid;place-items:center;background:var(--gxdlg-accent,#2563eb);color:#fff;font-size:22px}
.gxdlg-title{margin:0;font-size:1.15rem;font-weight:800;letter-spacing:.2px}
.gxdlg-sub{margin:.35rem 0 1rem;color:#cbd5e1;font-size:.93rem;line-height:1.35}
.gxdlg-actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
.gxdlg-btn{border:0;cursor:pointer;border-radius:10px;padding:10px 14px;font-weight:700;font-size:.95rem}
.gxdlg-primary{background:var(--gxdlg-accent,#2563eb);color:#fff}
.gxdlg-ghost{background:transparent;color:#93c5fd;border:1px solid rgba(147,197,253,.35)}
.gxdlg-foot{margin-top:12px;font-size:.78rem;color:#9ca3af}
@keyframes smoothBlink { 0%{opacity:.6}50%{opacity:1}100%{opacity:.6} }
</style>`.trim();

      const dialogHTML = `
<div id="gxdlg-${uid}" class="gxdlg-overlay" aria-hidden="true">
  <div class="gxdlg-modal" role="dialog" aria-modal="true" aria-labelledby="gxdlg-title-${uid}">
    <div class="gxdlg-head">
      <div class="gxdlg-badge">${dlgType==='thanks' ? '‚úÖ' : 'üëã'}</div>
      <div>
        <h3 id="gxdlg-title-${uid}" class="gxdlg-title">${sanitize(dlgTitle|| (presets[dlgType]?.title || ""))}</h3>
        <div class="gxdlg-sub">${sanitize(dlgSub || (presets[dlgType]?.sub || ""))}</div>
      </div>
    </div>
    <div class="gxdlg-actions">
      <button id="gxdlg-primary-${uid}" class="gxdlg-btn gxdlg-primary">${sanitize(dlgPrimary)}</button>
      <a id="gxdlg-secondary-${uid}" class="gxdlg-btn gxdlg-ghost" href="${dlgSecondaryHref}" target="_blank" rel="noopener noreferrer">${sanitize(dlgSecondary)}</a>
    </div>
    <div class="gxdlg-foot">${dlgMode==='once' ? 'Dialog ini tampil sekali untuk postingan ini.' : 'Dialog ini muncul setiap kali halaman dimuat.'}</div>
  </div>
</div>`.trim();

      const dialogJS = `
<script>(function(){
  var root = document.getElementById("gxdlg-${uid}");
  if (!root) return;
  var modal = root.querySelector(".gxdlg-modal");
  if (modal){
    modal.style.setProperty("--gxdlg-accent","${dlgAccent.replace(/"/g,'&quot;')}");
    modal.style.setProperty("--gxdlg-bg","${dlgBg.replace(/"/g,'&quot;')}");
  }
  function openDlg(){
    if (!root) return;
    root.style.display="flex";
    setTimeout(function(){ root.className += " gxdlg-open"; },10);
    var p=document.getElementById("gxdlg-primary-${uid}");
    if (p){ setTimeout(function(){ try{p.focus();}catch(e){} },40); }
  }
  function closeDlg(){
    if (!root) return;
    root.className=root.className.replace(/\\s?gxdlg-open/,"");
    setTimeout(function(){ root.style.display="none"; },180);
  }
  // Hanya tombol yang boleh menutup
  root.addEventListener("click", function(e){
    if (e.target === root){ e.stopPropagation(); e.preventDefault(); }
  }, true);
  document.addEventListener("keydown", function(e){ if(e.key==="Escape"){ e.preventDefault(); } });

  var primary = document.getElementById("gxdlg-primary-${uid}");
  if (primary){ primary.addEventListener("click", closeDlg); }

  var secondary = document.getElementById("gxdlg-secondary-${uid}");
  if (secondary){ secondary.addEventListener("click", function(){ ${dlgCloseSecondary ? 'setTimeout(closeDlg,80);' : ''} }); }

  // Mode tampil
  var mode = "${dlgMode}";
  if (mode === "once"){
    var key = "gxdlg:${dlgVersion.replace(/"/g,'&quot;')}:"+ (location.pathname||"").replace(/\\/+$/,"");
    try{ if (localStorage.getItem(key)==="1") return; }catch(e){}
    openDlg();
    try{ localStorage.setItem(key,"1"); }catch(e){}
  } else {
    openDlg();
    // BFCache
    window.addEventListener("pageshow", function(ev){
      if (ev.persisted){ setTimeout(openDlg, 50); }
    });
  }
})();<\/script>`.trim();

      dialogBlock = dialogCSS + "\n" + dialogHTML + "\n" + dialogJS;
    }

    // ====== CARD HTML ======
    const cardHTML = `<!-- BEGIN APK CARD GENERATED -->
<div class="apk-post-card">
  <div style="display:flex;gap:12px;align-items:center;">
    <img alt="App Icon" src="${iconUrl}" style="width:64px;height:64px;border-radius:14px;"/>
    <div>
      <div class="apk-title">${sanitize(appName)}<img alt="Verified" class="verified-icon" src="https://upload.wikimedia.org/wikipedia/commons/e/e4/Twitter_Verified_Badge.svg" style="width:18px;height:18px;"/></div>
      <div class="apk-developer"><a href="${devLink}" target="_blank" rel="noopener noreferrer">${sanitize(appDev)}</a></div>
    </div>
  </div>

  <div class="stat-box">
    <div class="stat-item"><div class="stat-value">${sanitize(appRating)}</div><div class="stat-label">Rating</div></div>
    <div class="stat-item"><div class="stat-value">${sanitize(appReviews)}</div><div class="stat-label">Ulasan</div></div>
    <div class="stat-item"><div class="stat-value">${sanitize(appDownloads)}</div><div class="stat-label">Unduhan</div></div>
  </div>

  <div class="apk-section-title"><b>Deskripsi</b></div>
  <div class="apk-description">${appDesc}</div>

  <div class="apk-section-title"><b>Screenshot</b></div>
  <div class="apk-screenshots">${screenshotHTML}</div>

  <div class="apk-section-title"><b>Info APK</b></div>
  <table class="apk-info">
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M9 3h6v2H9zM5 7h14v2H5zM7 11h10v2H7zM9 15h6v2H9zM11 19h2v2h-2z"/></svg>Versi</div></th><td>${sanitize(appVersion)}</td></tr>
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2zm0 17H5V8h14v12z"/></svg>Update</div></th><td>${sanitize(appDate)}</td></tr>
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M17.6 9.48l1.43-2.49a.5.5 0 0 0-.86-.5l-1.45 2.52A8.14 8.14 0 0 0 12 8c-1.7 0-3.28.53-4.72 1.5L5.83 6.49a.5.5 0 0 0-.86.5l1.42 2.49A7.94 7.94 0 0 0 4 15v5a1 1 0 0 0 1 1h2v-6h2v6h6v-6h2v6h2a1 1 0 0 0 1-1v-5c0-2.23-.91-4.24-2.4-5.52z"/></svg>Minimal Android</div></th><td>${sanitize(appAndroid)}</td></tr>
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M9 3h6v2h2v2h2v6h-2v2h-2v2H9v-2H7v-2H5V7h2V5h2V3zM7 9v6h10V9H7z"/></svg>CPU Support</div></th><td>${sanitize(cpuArch)}</td></tr>
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><circle cx="12" cy="7" r="4"/><path d="M5.5 22a7.5 7.5 0 0 1 13 0"/></svg>Developer</div></th><td><a href="${devLink}" target="_blank" rel="noopener">${sanitize(appDev)}</a></td></tr>
    <tr><th><div class="icon-text"><svg width="16" height="16" viewBox="0 0 24 24"><path d="M10 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-8l-2-2z"/></svg>Kategori</div></th><td>${sanitize(appCategory)}</td></tr>
  </table>

  <div class="apk-section-title"><b>Fitur MOD</b></div>
  <div class="apk-tags">${modHTML}</div>

  <div class="apk-buttons">
    <a class="download-button" href="#" data-link="${downloadLink}" onclick="startDownload_${uid}(event)">‚¨á Download${apkSize ? ` (${sanitize(apkSize)}MB)` : ""}</a>
    <div class="spinner-area"><div class="spinner"></div><div class="downloading-text">Mengunduh file‚Ä¶</div></div>
    <p style="margin-top:12px;font-size:0.7rem;color:rgba(255,255,255,0.7);font-weight:500;animation:smoothBlink 3s ease-in-out infinite;">
      üö® Link rusak? <a href="${dlgSecondaryHref}" target="_blank" style="color:dodgerblue;font-weight:500;">Hubungi saya di Telegram</a>.
    </p>
  </div>
</div>
<!-- Lightbox untuk kartu ini saja -->
<div id="gxbox-${uid}" style="position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.85);display:none;align-items:center;justify-content:center;z-index:9999;">
  <img id="gxbox-img-${uid}" src="" style="max-width:92%;max-height:92%;border-radius:20px;box-shadow:0 0 28px rgba(0,255,224,.7);">
</div>
<!-- END APK CARD -->`.trim();

    // ====== JS fungsi lokal untuk snippet (download + lightbox) ======
    const helperJS = `
<script>(function(){
  var ss = ${JSON.stringify(screenshots)};
  window.startDownload_${uid} = function(e){
    e.preventDefault();
    var btn = e.currentTarget;
    var spinner = btn.parentElement.querySelector(".spinner-area");
    btn.style.display="none"; spinner.style.display="flex";
    var link = btn.getAttribute("data-link") || "#";
    setTimeout(function(){
      spinner.style.display="none"; btn.style.display="inline-flex";
      try{ window.open(link,"_blank","noopener,noreferrer"); }catch(err){}
    }, 1200);
  };
  window.openLightbox_${uid} = function(i){
    var box = document.getElementById("gxbox-${uid}");
    var img = document.getElementById("gxbox-img-${uid}");
    if (!box || !img || !ss || !ss[i]) return;
    img.src = ss[i];
    box.style.display="flex";
    box.onclick = function(){ box.style.display="none"; };
  };
})();<\/script>`.trim();

    const htmlOutput = [
      dialogBlock, // bisa kosong jika dlgType = none
      cardHTML,
      helperJS
    ].filter(Boolean).join("\n\n");

    document.getElementById("outputHTML").value = htmlOutput;
  };

  // ===== Copy tetap sama =====
  window.copyToClipboard = function(){
    const output=document.getElementById("outputHTML");
    navigator.clipboard.writeText(output.value).then(()=>alert("Kode HTML telah disalin!"));
  };

  // ===== Preview lightbox di halaman generator =====
  window.openLightbox = function(index){
    const screenshots=document.getElementById("screenshots").value.split(',').map(f=>f.trim()).filter(f=>f);
    const img=document.getElementById("lightbox-img");
    const lb=document.getElementById("lightbox");
    if (!screenshots[index]) return;
    img.src=screenshots[index]; lb.style.display="flex";
  };
  window.closeLightbox = function(){ document.getElementById("lightbox").style.display="none"; };

  // ===== Auto restore form =====
  window.addEventListener("DOMContentLoaded", ()=>{
    document.querySelectorAll("#apkCardForm input,#apkCardForm textarea,#apkCardForm select").forEach(input=>{
      const saved=localStorage.getItem(input.id); if(saved!==null){input.value=saved;}
      input.addEventListener("input",()=>{localStorage.setItem(input.id,input.value);});
      input.addEventListener("change",()=>{localStorage.setItem(input.id,input.value);});
    });
  });
})();
</script>
</body>
</html>
